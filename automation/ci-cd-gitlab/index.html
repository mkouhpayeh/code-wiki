
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Personal technical knowledge base and code reference">
      
      
        <meta name="author" content="Mahboubeh Kouhpayeh">
      
      
        <link rel="canonical" href="https://mkouhpayeh.github.io/code-wiki/automation/ci-cd-gitlab/">
      
      
        <link rel="prev" href="../../ai/chat/">
      
      
        <link rel="next" href="../ci-cd-github/">
      
      
        
      
      
      <link rel="icon" href="../../assets/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>CI/CD GitLab - Code Wiki</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Segoe+UI:300,300i,400,400i,700,700i%7CSFMono-Regular:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Segoe UI";--md-code-font:"SFMono-Regular"}</style>
      
    
    
      <link rel="stylesheet" href="../../styles/custom.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#cicd-gitlab" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Code Wiki" class="md-header__button md-logo" aria-label="Code Wiki" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Code Wiki
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              CI/CD GitLab
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../fundamentals/foundation/" class="md-tabs__link">
          
  
  
  Fundamentals

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../csharp/api/api/" class="md-tabs__link">
          
  
  
  C#.NET

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../sql/col-max-len/" class="md-tabs__link">
          
  
  
  SQL

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../frontend/css-tips/" class="md-tabs__link">
          
  
  
  Frontend

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../python/extract-firebird/" class="md-tabs__link">
          
  
  
  Python

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../ai/chat/" class="md-tabs__link">
          
  
  
  AI

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
  
  Automation

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../docker/docker-intro/" class="md-tabs__link">
          
  
  
  Docker

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../tools/analyze-tools/" class="md-tabs__link">
          
  
  
  Tools

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Code Wiki" class="md-nav__button md-logo" aria-label="Code Wiki" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    Code Wiki
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Fundamentals
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Fundamentals
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fundamentals/foundation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Coding Foundation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fundamentals/shortcut/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Shortcuts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fundamentals/ssh-key/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SSH Settings
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fundamentals/windows-cmd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Windows Command
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fundamentals/mkdocs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MkDocs Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    C#.NET
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    C#.NET
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    API
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    API
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csharp/api/api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    API Server
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csharp/api/api-client/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    API Client
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csharp/api/api-arch/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    API Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csharp/api/anonymous-endpoint/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Anonymous Endpoint
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csharp/api/api-version/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    API Versioning
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Authentication
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Authentication
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csharp/authentication/auth/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Authentication
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csharp/authentication/authEx/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    EX Authentication
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    EntityFramework
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    EntityFramework
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csharp/entity-framework/ef/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csharp/entity-framework/config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configuration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Exception
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Exception
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csharp/exception/exception-custom/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Customization
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csharp/exception/exception-handler/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Handler
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csharp/exception/exception-filter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Filter
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" >
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Mailing
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Mailing
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csharp/mailing/email-service/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Email Service
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csharp/mailing/email-cloud-service/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Cloud Service
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6" >
        
          
          <label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Validation
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Validation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csharp/validation/attrib/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Validation Attributes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csharp/validation/custom-attrib/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Custom Validation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_7" >
        
          
          <label class="md-nav__link" for="__nav_3_7" id="__nav_3_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Patterns
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Patterns
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csharp/dec-pattern/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Declaration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_8" >
        
          
          <label class="md-nav__link" for="__nav_3_8" id="__nav_3_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Settings
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Settings
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csharp/appsettings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    App Settings
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csharp/con-string/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Connection String
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csharp/state-service/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    State Service
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csharp/migrate-sqlserver/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Migrate DB
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_9" >
        
          
          <label class="md-nav__link" for="__nav_3_9" id="__nav_3_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Error
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    Error
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csharp/error/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Error Handling
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_10" >
        
          
          <label class="md-nav__link" for="__nav_3_10" id="__nav_3_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Dependency Injection
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    Dependency Injection
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csharp/di-lifetime/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lifetimes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_11" >
        
          
          <label class="md-nav__link" for="__nav_3_11" id="__nav_3_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Google
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_11">
            <span class="md-nav__icon md-icon"></span>
            
  
    Google
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csharp/google-recaptcha/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    reCAPTCHA
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_12" >
        
          
          <label class="md-nav__link" for="__nav_3_12" id="__nav_3_12_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    HTTP
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_12">
            <span class="md-nav__icon md-icon"></span>
            
  
    HTTP
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csharp/http-request/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Requests
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_13" >
        
          
          <label class="md-nav__link" for="__nav_3_13" id="__nav_3_13_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Deploy
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_13">
            <span class="md-nav__icon md-icon"></span>
            
  
    Deploy
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csharp/iis-virtualApp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IIS
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_14" >
        
          
          <label class="md-nav__link" for="__nav_3_14" id="__nav_3_14_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Security
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_14">
            <span class="md-nav__icon md-icon"></span>
            
  
    Security
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csharp/security/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Security
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_15" >
        
          
          <label class="md-nav__link" for="__nav_3_15" id="__nav_3_15_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Azure
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_15">
            <span class="md-nav__icon md-icon"></span>
            
  
    Azure
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csharp/azure-insights/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Azure Insights
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    SQL
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    SQL
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sql/col-max-len/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Column Length
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sql/index-frag/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Index Fragmentation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sql/index-job/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Index Job
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sql/index-list/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Index List
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sql/index-rebuild/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Index Rebuild
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sql/sample-data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Generate Data
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sql/vol-space/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Vol Space
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Frontend
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Frontend
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/css-tips/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CSS Tips
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/bootstrap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Bootstrap
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/loading-overlay/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Loading Page
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/markdown/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Markdown
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Python
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Python
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../python/extract-firebird/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Extract Firebird
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    AI
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    AI
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/chat/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AI Foundation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" checked>
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Automation
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Automation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    CI/CD GitLab
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    CI/CD GitLab
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#deploy-net-in-iis-winrm" class="md-nav__link">
    <span class="md-ellipsis">
      
        Deploy .Net in IIS (WinRM)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deploy-net-in-iis" class="md-nav__link">
    <span class="md-ellipsis">
      
        Deploy .Net in IIS
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-notifications" class="md-nav__link">
    <span class="md-ellipsis">
      
        Add notifications
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ci-cd-github/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CI/CD GitHub
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ansible-intro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ansible Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ansible-playbook/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ansible Playbook
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Docker
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    Docker
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../docker/docker-intro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Docker Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../docker/docker-install/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Docker Installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../docker/docker-useage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Docker Usage
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Tools
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    Tools
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/analyze-tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Analyze Tools
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/performance-tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Performance Tools
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="cicd-gitlab">CI/CD GitLab<a class="headerlink" href="#cicd-gitlab" title="Permanent link">&para;</a></h1>
<ul>
<li>
<p>CI/CD pipelines are the fundamental component of GitLab CI/CD. Pipelines are configured in a ".gitlab-ci.yml" file by using YAML keywords.</p>
</li>
<li>
<p>Pipelines can run automatically for specific events, like when pushing to a branch, creating a merge request, or on a schedule. When needed, you can also run pipelines manually.</p>
</li>
<li>
<p>You can add CI/CD variables to a projects settings. Projects can have a maximum of 8000 CI/CD variables.</p>
<ul>
<li><strong>Key</strong>: Must be one line, with no spaces, using only letters, numbers, or _.</li>
<li><strong>Value</strong>: The value is limited to 10,000 characters, but also bounded by any limits in the runners operating system. The value has extra limitations if Visibility is set to Masked or Masked and hidden.</li>
<li><strong>Type</strong>: Variable (default) or File.</li>
<li><strong>Environment scope</strong>: Optional. All (default) (*), a specific environment, or a wildcard environment scope.</li>
<li><strong>Protect variable</strong>: Optional. If selected, the variable is only available in pipelines that run on protected branches or tags.</li>
<li><strong>Visibility</strong>: Select Visible (default), Masked, or Masked and hidden.</li>
<li><strong>Expand variable reference</strong>: Optional. If selected, the variable can reference another variable. It is not possible to reference another variable if Visibility is set to Masked or Masked and hidden.</li>
</ul>
</li>
<li>
<p>Runners are the agents that run the GitLab Runner application, to execute GitLab CI/CD jobs in a pipeline. They are responsible for running your builds, tests, deployments, and other CI/CD tasks defined in .gitlab-ci.yml files.</p>
</li>
</ul>
<hr />
<h2 id="deploy-net-in-iis-winrm">Deploy .Net in IIS (WinRM)<a class="headerlink" href="#deploy-net-in-iis-winrm" title="Permanent link">&para;</a></h2>
<p>Run test if available on main branche and deploy project manually on IIS when any changes applied to the production branch.</p>
<ol>
<li>
<p>One-time IIS server prep. Do these on the remote server:</p>
<ul>
<li>
<p>Install <a href="https://dotnet.microsoft.com/en-us/download/dotnet/9.0">.NET Hosting Bundle</a> (match your target, e.g. .NET 9). Reboot if the installer asks.</p>
</li>
<li>
<p>Create the site folder</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>New-Item -ItemType Directory -Force -Path &quot;C:\inetpub\wwwroot\Hello-World&quot;
</code></pre></div>
<ul>
<li>Create a deploy user (least-privilege)</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>New-LocalUser -Name &quot;gitlab_deploy&quot; -Password (Read-Host -AsSecureString &quot;Password&quot;) -FullName &quot;GitLab Deploy User&quot; -PasswordNeverExpires
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>Add-LocalGroupMember -Group &quot;Remote Management Users&quot; -Member &quot;gitlab_deploy&quot;
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a># File write permission on the site folder:
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>$acl = Get-Acl &quot;C:\inetpub\wwwroot\Hello-World&quot;
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>$rule = New-Object System.Security.AccessControl.FileSystemAccessRule(&quot;gitlab_deploy&quot;,&quot;Modify&quot;,&quot;ContainerInherit, ObjectInherit&quot;,&quot;None&quot;,&quot;Allow&quot;)
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>$acl.AddAccessRule($rule)
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>Set-Acl &quot;C:\inetpub\wwwroot\Hello-World&quot; $acl
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>Add-LocalGroupMember -Group &quot;IIS_IUSRS&quot; -Member &quot;gitlab_deploy&quot;
</code></pre></div>
<ul>
<li>Enable WinRM + HTTPS listener (port 5986)</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a># Enable WinRM
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>Enable-PSRemoting -Force
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a># Create a self-signed cert for WinRM HTTPS
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>$cert = New-SelfSignedCertificate -DnsName &quot;ServerName&quot; -CertStoreLocation &quot;Cert:\LocalMachine\My&quot;
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a># Create HTTPS listener using that cert
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>$thumb = $cert.Thumbprint
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>winrm create winrm/config/Listener?Address=*+Transport=HTTPS &quot;@{Hostname=`&quot;ServerName`&quot;; CertificateThumbprint=`&quot;$thumb`&quot;}&quot;
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a># Open firewall
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a>New-NetFirewallRule -DisplayName &quot;WinRM HTTPS (5986)&quot; -Direction Inbound -Protocol TCP -LocalPort 5986 -Action Allow
</code></pre></div>
<ul>
<li>Verify:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>winrm enumerate winrm/config/Listener
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>Test-NetConnection -ComputerName ServerName -Port 5986
</code></pre></div>
</li>
<li>
<p>On the Windows GitLab Runner machine (not the IIS server)
We need a Windows runner somewhere that can reach ServerName:5986:</p>
<ul>
<li>
<p>Install &amp; register GitLab Runner (executor = shell), tag it windows.</p>
</li>
<li>
<p>Allow connecting to self-signed/hostname-mismatch (well pass flags in the script). (No global TrustedHosts needed because we use HTTPS + skip checks.)</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>$sec = ConvertTo-SecureString &quot;YourStrongPassword!&quot; -AsPlainText -Force
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>$cred = New-Object pscredential (&quot;ServerName\gitlab_deploy&quot;, $sec)
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>$so = New-PSSessionOption -SkipCACheck -SkipCNCheck
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>New-PSSession -ComputerName ServerName -UseSSL -Credential $cred -SessionOption $so
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a># If you get a session object (not an error), youre good. Then:
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>Get-PSSession | Remove-PSSession
</code></pre></div>
</li>
<li>
<p>Create CI file ".gitlab-ci.yml" in the project root</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>stages: [build, test, package]
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a># ---------- CI (build/test/publish) ----------
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>image: mcr.microsoft.com/dotnet/sdk:9.0
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>variables:
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>  DOTNET_CLI_TELEMETRY_OPTOUT: &quot;1&quot;
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>  DOTNET_SKIP_FIRST_TIME_EXPERIENCE: &quot;1&quot;
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>  CONFIGURATION: &quot;Release&quot;
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a>
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a>cache:
<a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>  key: &quot;nuget&quot;
<a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a>  paths:
<a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a>    - .nuget/packages
<a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a>
<a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a>build:
<a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a>  stage: build
<a id="__codelineno-6-18" name="__codelineno-6-18" href="#__codelineno-6-18"></a>  script:
<a id="__codelineno-6-19" name="__codelineno-6-19" href="#__codelineno-6-19"></a>    - dotnet --info
<a id="__codelineno-6-20" name="__codelineno-6-20" href="#__codelineno-6-20"></a>    - dotnet restore
<a id="__codelineno-6-21" name="__codelineno-6-21" href="#__codelineno-6-21"></a>    - dotnet build -c $CONFIGURATION
<a id="__codelineno-6-22" name="__codelineno-6-22" href="#__codelineno-6-22"></a>  rules:
<a id="__codelineno-6-23" name="__codelineno-6-23" href="#__codelineno-6-23"></a>    - if: &#39;$CI_COMMIT_BRANCH == &quot;main&quot;&#39;
<a id="__codelineno-6-24" name="__codelineno-6-24" href="#__codelineno-6-24"></a>    - if: &#39;$CI_COMMIT_BRANCH == &quot;production&quot;&#39;
<a id="__codelineno-6-25" name="__codelineno-6-25" href="#__codelineno-6-25"></a>
<a id="__codelineno-6-26" name="__codelineno-6-26" href="#__codelineno-6-26"></a>test:
<a id="__codelineno-6-27" name="__codelineno-6-27" href="#__codelineno-6-27"></a>  stage: test
<a id="__codelineno-6-28" name="__codelineno-6-28" href="#__codelineno-6-28"></a>  script:
<a id="__codelineno-6-29" name="__codelineno-6-29" href="#__codelineno-6-29"></a>    - if [ -d &quot;tests&quot; ]; then dotnet test --no-build -c $CONFIGURATION; else echo &quot;No tests found, skipping.&quot;; fi
<a id="__codelineno-6-30" name="__codelineno-6-30" href="#__codelineno-6-30"></a>  needs: [build]
<a id="__codelineno-6-31" name="__codelineno-6-31" href="#__codelineno-6-31"></a>  rules:
<a id="__codelineno-6-32" name="__codelineno-6-32" href="#__codelineno-6-32"></a>    - if: &#39;$CI_COMMIT_BRANCH == &quot;main&quot;&#39;
<a id="__codelineno-6-33" name="__codelineno-6-33" href="#__codelineno-6-33"></a>
<a id="__codelineno-6-34" name="__codelineno-6-34" href="#__codelineno-6-34"></a>package:
<a id="__codelineno-6-35" name="__codelineno-6-35" href="#__codelineno-6-35"></a>  stage: package
<a id="__codelineno-6-36" name="__codelineno-6-36" href="#__codelineno-6-36"></a>  script:
<a id="__codelineno-6-37" name="__codelineno-6-37" href="#__codelineno-6-37"></a>    # publish to a fixed folder that we artifact
<a id="__codelineno-6-38" name="__codelineno-6-38" href="#__codelineno-6-38"></a>    - dotnet publish Hello-World.csproj -c $CONFIGURATION -o publish
<a id="__codelineno-6-39" name="__codelineno-6-39" href="#__codelineno-6-39"></a>  needs: [build]
<a id="__codelineno-6-40" name="__codelineno-6-40" href="#__codelineno-6-40"></a>  artifacts:
<a id="__codelineno-6-41" name="__codelineno-6-41" href="#__codelineno-6-41"></a>    paths:
<a id="__codelineno-6-42" name="__codelineno-6-42" href="#__codelineno-6-42"></a>      - publish/**          
<a id="__codelineno-6-43" name="__codelineno-6-43" href="#__codelineno-6-43"></a>      - scripts/**
<a id="__codelineno-6-44" name="__codelineno-6-44" href="#__codelineno-6-44"></a>    expire_in: 7 days
<a id="__codelineno-6-45" name="__codelineno-6-45" href="#__codelineno-6-45"></a>  rules:
<a id="__codelineno-6-46" name="__codelineno-6-46" href="#__codelineno-6-46"></a>    - if: &#39;$CI_COMMIT_BRANCH == &quot;production&quot;&#39;
<a id="__codelineno-6-47" name="__codelineno-6-47" href="#__codelineno-6-47"></a>  when: on_success
</code></pre></div>
</li>
<li>
<p>Register Runner</p>
<ul>
<li><a href="https://docs.gitlab.com/runner/install/windows.html">Download Runner</a></li>
<li>
<p>Register Runner to the Gitlab project</p>
<ul>
<li>Settings &gt; CI/CD &gt; Runner &gt; Tag: windows</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>.<span class="se">\g</span>itlab-runner.exe<span class="w"> </span>register<span class="w">  </span>--url<span class="w"> </span>https://gitlab-URL<span class="w">  </span>--token<span class="w"> </span>xxxxxxxxxxxxxx
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="c1"># enter the URL</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="c1"># enter the name</span>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="c1"># enter executer: shell</span>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="c1"># edit the config.toml =&gt; shell = &quot;powershell&quot;</span>
</code></pre></div>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>.<span class="se">\g</span>itlab-runner.exe<span class="w"> </span>run
</code></pre></div>
    - The runner service will run as gitlab-runner user</p>
<ul>
<li>
<p>Make sure that user has write permission to the IIS site folder (e.g. C:\inetpub\wwwroot\HelloWorld).</p>
</li>
<li>
<p>Make sure the IIS server already has the <a href="https://dotnet.microsoft.com/en-us/download/dotnet/9.0">.NET 9 Hosting Bundle</a> installed.</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Add deploy script to the repo
    Create folder scripts/ and add Deploy-IIS-RemoteWinRM.ps1:
    <div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>param(
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>  [Parameter(Mandatory=$true)][string]$PackageDir,          # local publish dir (from artifacts)
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>  [Parameter(Mandatory=$true)][string]$ComputerName,        # ServerName
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>  [Parameter(Mandatory=$true)][string]$SitePath,            # e.g. C:\inetpub\wwwroot\Hello-World
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>  [Parameter(Mandatory=$false)][string]$AppPool,            # optional, e.g. &#39;HelloWorldPool&#39;
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>  [Parameter(Mandatory=$true)][string]$Username,            # e.g. ServerName\gitlab_deploy
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a>  [Parameter(Mandatory=$true)][string]$Password
<a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a>)
<a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a>
<a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a>$ErrorActionPreference = &#39;Stop&#39;
<a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a>
<a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a># Prepare credentials &amp; session
<a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a>$sec = ConvertTo-SecureString $Password -AsPlainText -Force
<a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a>$cred = New-Object System.Management.Automation.PSCredential ($Username, $sec)
<a id="__codelineno-9-15" name="__codelineno-9-15" href="#__codelineno-9-15"></a>$so = New-PSSessionOption -SkipCACheck -SkipCNCheck
<a id="__codelineno-9-16" name="__codelineno-9-16" href="#__codelineno-9-16"></a>
<a id="__codelineno-9-17" name="__codelineno-9-17" href="#__codelineno-9-17"></a># Create a zip of the publish folder
<a id="__codelineno-9-18" name="__codelineno-9-18" href="#__codelineno-9-18"></a>$zip = Join-Path $env:TEMP (&quot;app_&quot; + [guid]::NewGuid().Guid + &quot;.zip&quot;)
<a id="__codelineno-9-19" name="__codelineno-9-19" href="#__codelineno-9-19"></a>Add-Type -AssemblyName System.IO.Compression.FileSystem
<a id="__codelineno-9-20" name="__codelineno-9-20" href="#__codelineno-9-20"></a>if (Test-Path $zip) { Remove-Item $zip -Force }
<a id="__codelineno-9-21" name="__codelineno-9-21" href="#__codelineno-9-21"></a>[System.IO.Compression.ZipFile]::CreateFromDirectory($PackageDir, $zip)
<a id="__codelineno-9-22" name="__codelineno-9-22" href="#__codelineno-9-22"></a>
<a id="__codelineno-9-23" name="__codelineno-9-23" href="#__codelineno-9-23"></a># Open remote session over WinRM HTTPS
<a id="__codelineno-9-24" name="__codelineno-9-24" href="#__codelineno-9-24"></a>$session = New-PSSession -ComputerName $ComputerName -UseSSL -Credential $cred -SessionOption $so
<a id="__codelineno-9-25" name="__codelineno-9-25" href="#__codelineno-9-25"></a>try {
<a id="__codelineno-9-26" name="__codelineno-9-26" href="#__codelineno-9-26"></a>  $remoteTemp = Invoke-Command -Session $session -ScriptBlock {
<a id="__codelineno-9-27" name="__codelineno-9-27" href="#__codelineno-9-27"></a>    $p = Join-Path $env:TEMP (&quot;deploy_&quot; + [guid]::NewGuid().Guid)
<a id="__codelineno-9-28" name="__codelineno-9-28" href="#__codelineno-9-28"></a>    New-Item -ItemType Directory -Path $p -Force | Out-Null
<a id="__codelineno-9-29" name="__codelineno-9-29" href="#__codelineno-9-29"></a>    $p
<a id="__codelineno-9-30" name="__codelineno-9-30" href="#__codelineno-9-30"></a>  }
<a id="__codelineno-9-31" name="__codelineno-9-31" href="#__codelineno-9-31"></a>
<a id="__codelineno-9-32" name="__codelineno-9-32" href="#__codelineno-9-32"></a>  # Copy zip to remote
<a id="__codelineno-9-33" name="__codelineno-9-33" href="#__codelineno-9-33"></a>  Copy-Item -Path $zip -Destination (Join-Path $remoteTemp &quot;app.zip&quot;) -ToSession $session
<a id="__codelineno-9-34" name="__codelineno-9-34" href="#__codelineno-9-34"></a>
<a id="__codelineno-9-35" name="__codelineno-9-35" href="#__codelineno-9-35"></a>  # Remote unpack + mirror + recycle app pool
<a id="__codelineno-9-36" name="__codelineno-9-36" href="#__codelineno-9-36"></a>  Invoke-Command -Session $session -ScriptBlock {
<a id="__codelineno-9-37" name="__codelineno-9-37" href="#__codelineno-9-37"></a>    param($zipPath, $targetPath, $appPool)
<a id="__codelineno-9-38" name="__codelineno-9-38" href="#__codelineno-9-38"></a>    $ErrorActionPreference = &#39;Stop&#39;
<a id="__codelineno-9-39" name="__codelineno-9-39" href="#__codelineno-9-39"></a>
<a id="__codelineno-9-40" name="__codelineno-9-40" href="#__codelineno-9-40"></a>    if (!(Test-Path $targetPath)) { New-Item -ItemType Directory -Force -Path $targetPath | Out-Null }
<a id="__codelineno-9-41" name="__codelineno-9-41" href="#__codelineno-9-41"></a>
<a id="__codelineno-9-42" name="__codelineno-9-42" href="#__codelineno-9-42"></a>    # Take app offline to avoid lock issues
<a id="__codelineno-9-43" name="__codelineno-9-43" href="#__codelineno-9-43"></a>    $offline = Join-Path $targetPath &#39;app_offline.htm&#39;
<a id="__codelineno-9-44" name="__codelineno-9-44" href="#__codelineno-9-44"></a>    &#39;&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;body&gt;&lt;h3&gt;Updating&lt;/h3&gt;&lt;/body&gt;&lt;/html&gt;&#39; | Out-File -Encoding utf8 $offline
<a id="__codelineno-9-45" name="__codelineno-9-45" href="#__codelineno-9-45"></a>
<a id="__codelineno-9-46" name="__codelineno-9-46" href="#__codelineno-9-46"></a>    if ($appPool) {
<a id="__codelineno-9-47" name="__codelineno-9-47" href="#__codelineno-9-47"></a>      Import-Module WebAdministration
<a id="__codelineno-9-48" name="__codelineno-9-48" href="#__codelineno-9-48"></a>      if (Test-Path &quot;IIS:\AppPools\$appPool&quot;) { Stop-WebAppPool -Name $appPool }
<a id="__codelineno-9-49" name="__codelineno-9-49" href="#__codelineno-9-49"></a>    }
<a id="__codelineno-9-50" name="__codelineno-9-50" href="#__codelineno-9-50"></a>
<a id="__codelineno-9-51" name="__codelineno-9-51" href="#__codelineno-9-51"></a>    Add-Type -AssemblyName System.IO.Compression.FileSystem
<a id="__codelineno-9-52" name="__codelineno-9-52" href="#__codelineno-9-52"></a>    $tmpExtract = Join-Path $env:TEMP (&quot;extract_&quot; + [guid]::NewGuid().Guid)
<a id="__codelineno-9-53" name="__codelineno-9-53" href="#__codelineno-9-53"></a>    New-Item -ItemType Directory -Force -Path $tmpExtract | Out-Null
<a id="__codelineno-9-54" name="__codelineno-9-54" href="#__codelineno-9-54"></a>    [System.IO.Compression.ZipFile]::ExtractToDirectory($zipPath, $tmpExtract)
<a id="__codelineno-9-55" name="__codelineno-9-55" href="#__codelineno-9-55"></a>
<a id="__codelineno-9-56" name="__codelineno-9-56" href="#__codelineno-9-56"></a>    # Mirror files (fast &amp; resilient)
<a id="__codelineno-9-57" name="__codelineno-9-57" href="#__codelineno-9-57"></a>    $rc = robocopy $tmpExtract $targetPath /MIR /NFL /NDL /NP /R:2 /W:2
<a id="__codelineno-9-58" name="__codelineno-9-58" href="#__codelineno-9-58"></a>    if ($LASTEXITCODE -ge 8) { throw &quot;Robocopy failed with code $LASTEXITCODE&quot; }
<a id="__codelineno-9-59" name="__codelineno-9-59" href="#__codelineno-9-59"></a>
<a id="__codelineno-9-60" name="__codelineno-9-60" href="#__codelineno-9-60"></a>    Remove-Item $offline -ErrorAction SilentlyContinue
<a id="__codelineno-9-61" name="__codelineno-9-61" href="#__codelineno-9-61"></a>
<a id="__codelineno-9-62" name="__codelineno-9-62" href="#__codelineno-9-62"></a>    if ($appPool) { Start-WebAppPool -Name $appPool }
<a id="__codelineno-9-63" name="__codelineno-9-63" href="#__codelineno-9-63"></a>
<a id="__codelineno-9-64" name="__codelineno-9-64" href="#__codelineno-9-64"></a>    Remove-Item $tmpExtract -Recurse -Force
<a id="__codelineno-9-65" name="__codelineno-9-65" href="#__codelineno-9-65"></a>    Remove-Item $zipPath -Force
<a id="__codelineno-9-66" name="__codelineno-9-66" href="#__codelineno-9-66"></a>  } -ArgumentList (Join-Path $remoteTemp &quot;app.zip&quot;), $SitePath, $AppPool
<a id="__codelineno-9-67" name="__codelineno-9-67" href="#__codelineno-9-67"></a>
<a id="__codelineno-9-68" name="__codelineno-9-68" href="#__codelineno-9-68"></a>} finally {
<a id="__codelineno-9-69" name="__codelineno-9-69" href="#__codelineno-9-69"></a>  if ($session) { Remove-PSSession $session }
<a id="__codelineno-9-70" name="__codelineno-9-70" href="#__codelineno-9-70"></a>  if (Test-Path $zip) { Remove-Item $zip -Force }
<a id="__codelineno-9-71" name="__codelineno-9-71" href="#__codelineno-9-71"></a>}
<a id="__codelineno-9-72" name="__codelineno-9-72" href="#__codelineno-9-72"></a>
<a id="__codelineno-9-73" name="__codelineno-9-73" href="#__codelineno-9-73"></a>Write-Host &quot;Remote deploy complete.&quot;
</code></pre></div></p>
</li>
<li>
<p>Add protected CI/CD variables in GitLab</p>
<ul>
<li>
<p>Project  Settings  CI/CD  Variables (mask &amp; protect where appropriate):</p>
<ul>
<li>
<p>PROD_SERVER = ServerName (or 192.168.35.15)</p>
</li>
<li>
<p>PROD_USER = ServerName\gitlab_deploy</p>
</li>
<li>
<p>PROD_PASSWORD = (the password you set)</p>
</li>
<li>
<p>IIS_SITE_PATH = C:\inetpub\wwwroot\Hello-World</p>
</li>
<li>
<p>(Optional) IIS_APPPOOL = your app pool name if you want to stop/start it</p>
</li>
</ul>
</li>
<li>
<p>Mark them Protected so theyre only available to the production branch.</p>
</li>
</ul>
</li>
<li>
<p>Extend the .gitlab-ci.yml with the deploy job (replace it):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>stages: [build, test, package, deploy]
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>image: mcr.microsoft.com/dotnet/sdk:9.0
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>variables:
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>  DOTNET_CLI_TELEMETRY_OPTOUT: &quot;1&quot;
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a>  DOTNET_SKIP_FIRST_TIME_EXPERIENCE: &quot;1&quot;
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a>  CONFIGURATION: &quot;Release&quot;
<a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a>
<a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a>cache:
<a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a>  key: &quot;nuget&quot;
<a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a>  paths:
<a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a>    - .nuget/packages
<a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a>
<a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a># 1 Build
<a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a>build:
<a id="__codelineno-10-17" name="__codelineno-10-17" href="#__codelineno-10-17"></a>  stage: build
<a id="__codelineno-10-18" name="__codelineno-10-18" href="#__codelineno-10-18"></a>  script:
<a id="__codelineno-10-19" name="__codelineno-10-19" href="#__codelineno-10-19"></a>    - dotnet restore
<a id="__codelineno-10-20" name="__codelineno-10-20" href="#__codelineno-10-20"></a>    - dotnet build -c $CONFIGURATION
<a id="__codelineno-10-21" name="__codelineno-10-21" href="#__codelineno-10-21"></a>  rules:
<a id="__codelineno-10-22" name="__codelineno-10-22" href="#__codelineno-10-22"></a>    - if: &#39;$CI_COMMIT_BRANCH == &quot;main&quot;&#39;
<a id="__codelineno-10-23" name="__codelineno-10-23" href="#__codelineno-10-23"></a>    - if: &#39;$CI_COMMIT_BRANCH == &quot;production&quot;&#39;
<a id="__codelineno-10-24" name="__codelineno-10-24" href="#__codelineno-10-24"></a>
<a id="__codelineno-10-25" name="__codelineno-10-25" href="#__codelineno-10-25"></a># 2 Test
<a id="__codelineno-10-26" name="__codelineno-10-26" href="#__codelineno-10-26"></a>test:
<a id="__codelineno-10-27" name="__codelineno-10-27" href="#__codelineno-10-27"></a>  stage: test
<a id="__codelineno-10-28" name="__codelineno-10-28" href="#__codelineno-10-28"></a>  script:
<a id="__codelineno-10-29" name="__codelineno-10-29" href="#__codelineno-10-29"></a>    - if [ -d &quot;tests&quot; ]; then dotnet test --no-build -c $CONFIGURATION; else echo &quot;No tests found, skipping.&quot;; fi
<a id="__codelineno-10-30" name="__codelineno-10-30" href="#__codelineno-10-30"></a>  needs: [build]
<a id="__codelineno-10-31" name="__codelineno-10-31" href="#__codelineno-10-31"></a>  rules:
<a id="__codelineno-10-32" name="__codelineno-10-32" href="#__codelineno-10-32"></a>    - if: &#39;$CI_COMMIT_BRANCH == &quot;main&quot;&#39;
<a id="__codelineno-10-33" name="__codelineno-10-33" href="#__codelineno-10-33"></a>
<a id="__codelineno-10-34" name="__codelineno-10-34" href="#__codelineno-10-34"></a># 3 Package
<a id="__codelineno-10-35" name="__codelineno-10-35" href="#__codelineno-10-35"></a>package:
<a id="__codelineno-10-36" name="__codelineno-10-36" href="#__codelineno-10-36"></a>  stage: package
<a id="__codelineno-10-37" name="__codelineno-10-37" href="#__codelineno-10-37"></a>  script:
<a id="__codelineno-10-38" name="__codelineno-10-38" href="#__codelineno-10-38"></a>    - dotnet publish Hello-World.csproj -c $CONFIGURATION -o publish
<a id="__codelineno-10-39" name="__codelineno-10-39" href="#__codelineno-10-39"></a>  needs: [build]
<a id="__codelineno-10-40" name="__codelineno-10-40" href="#__codelineno-10-40"></a>  artifacts:
<a id="__codelineno-10-41" name="__codelineno-10-41" href="#__codelineno-10-41"></a>    paths:
<a id="__codelineno-10-42" name="__codelineno-10-42" href="#__codelineno-10-42"></a>      - publish/**
<a id="__codelineno-10-43" name="__codelineno-10-43" href="#__codelineno-10-43"></a>      - scripts/**
<a id="__codelineno-10-44" name="__codelineno-10-44" href="#__codelineno-10-44"></a>    expire_in: 7 days
<a id="__codelineno-10-45" name="__codelineno-10-45" href="#__codelineno-10-45"></a>  rules:
<a id="__codelineno-10-46" name="__codelineno-10-46" href="#__codelineno-10-46"></a>    - if: &#39;$CI_COMMIT_BRANCH == &quot;production&quot;&#39;
<a id="__codelineno-10-47" name="__codelineno-10-47" href="#__codelineno-10-47"></a>
<a id="__codelineno-10-48" name="__codelineno-10-48" href="#__codelineno-10-48"></a># 4 Deploy via WinRM
<a id="__codelineno-10-49" name="__codelineno-10-49" href="#__codelineno-10-49"></a>deploy_prod_remote_winrm:
<a id="__codelineno-10-50" name="__codelineno-10-50" href="#__codelineno-10-50"></a>  stage: deploy
<a id="__codelineno-10-51" name="__codelineno-10-51" href="#__codelineno-10-51"></a>  tags: [&quot;windows&quot;]          # runner tag that can run PowerShell + has WinRM access
<a id="__codelineno-10-52" name="__codelineno-10-52" href="#__codelineno-10-52"></a>  needs: [&quot;package&quot;]
<a id="__codelineno-10-53" name="__codelineno-10-53" href="#__codelineno-10-53"></a>  variables:
<a id="__codelineno-10-54" name="__codelineno-10-54" href="#__codelineno-10-54"></a>    GIT_STRATEGY: none
<a id="__codelineno-10-55" name="__codelineno-10-55" href="#__codelineno-10-55"></a>  script:
<a id="__codelineno-10-56" name="__codelineno-10-56" href="#__codelineno-10-56"></a>    - powershell -NoProfile -ExecutionPolicy Bypass -File &quot;scripts\Deploy-IIS-RemoteWinRM.ps1&quot; `
<a id="__codelineno-10-57" name="__codelineno-10-57" href="#__codelineno-10-57"></a>        -PackageDir &quot;$env:CI_PROJECT_DIR\publish&quot; `
<a id="__codelineno-10-58" name="__codelineno-10-58" href="#__codelineno-10-58"></a>        -ComputerName &quot;$env:PROD_SERVER&quot; `
<a id="__codelineno-10-59" name="__codelineno-10-59" href="#__codelineno-10-59"></a>        -SitePath &quot;$env:IIS_SITE_PATH&quot; `
<a id="__codelineno-10-60" name="__codelineno-10-60" href="#__codelineno-10-60"></a>        -AppPool &quot;$env:IIS_APPPOOL&quot; `
<a id="__codelineno-10-61" name="__codelineno-10-61" href="#__codelineno-10-61"></a>        -Username &quot;$env:PROD_USER&quot; `
<a id="__codelineno-10-62" name="__codelineno-10-62" href="#__codelineno-10-62"></a>        -Password &quot;$env:PROD_PASSWORD&quot;
<a id="__codelineno-10-63" name="__codelineno-10-63" href="#__codelineno-10-63"></a>  environment:
<a id="__codelineno-10-64" name="__codelineno-10-64" href="#__codelineno-10-64"></a>    name: production
<a id="__codelineno-10-65" name="__codelineno-10-65" href="#__codelineno-10-65"></a>    url: http://$env:PROD_SERVER/
<a id="__codelineno-10-66" name="__codelineno-10-66" href="#__codelineno-10-66"></a>  when: manual
<a id="__codelineno-10-67" name="__codelineno-10-67" href="#__codelineno-10-67"></a>  rules:
<a id="__codelineno-10-68" name="__codelineno-10-68" href="#__codelineno-10-68"></a>    - if: &#39;$CI_COMMIT_BRANCH == &quot;production&quot;&#39;
</code></pre></div>
</li>
<li>
<p>Protect the production path (optional but recommended)</p>
<ul>
<li>
<p>Protect production branch: Settings  Repository  Protected Branches.</p>
</li>
<li>
<p>Environment approvals: Deployments  Environments  production  Protect, add at least one approver.</p>
</li>
</ul>
</li>
<li>
<p>Test the full flow</p>
<ul>
<li>
<p>Push to production branch (your pipeline will run build  package  deploy).</p>
</li>
<li>
<p>In Pipelines, click Play on deploy_prod_remote_winrm.</p>
</li>
<li>
<p>Watch the logs  it should:</p>
<ul>
<li>
<p>Zip publish/</p>
</li>
<li>
<p>Open WinRM session to ws2019dggweb</p>
</li>
<li>
<p>Copy zip  extract  mirror into C:\inetpub\wwwroot\Hello-World</p>
</li>
<li>
<p>(Optionally) stop/start the app pool</p>
</li>
</ul>
</li>
<li>
<p>Browse to http://ws2019dggweb/ (or the site binding you use) and verify the app.</p>
</li>
</ul>
</li>
</ol>
<hr />
<h2 id="deploy-net-in-iis">Deploy .Net in IIS<a class="headerlink" href="#deploy-net-in-iis" title="Permanent link">&para;</a></h2>
<p>Runner installed on the IIS Server</p>
<ol>
<li>
<p>Prereqs (one-time on the IIS server)</p>
<ul>
<li>
<p>Install <a href="https://dotnet.microsoft.com/en-us/download/dotnet/9.0">.NET Hosting Bundle</a> (match your target, e.g. .NET 9). Reboot if the installer asks.</p>
</li>
<li>
<p>Create the site folder</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>New-Item -ItemType Directory -Force -Path &quot;C:\inetpub\wwwroot\Hello-World&quot;
</code></pre></div>
<ul>
<li>(Optional) App Pool
    In IIS Manager create an App Pool, e.g. HelloWorldPool (No Managed Code, Integrated).</li>
</ul>
</li>
<li>
<p>Install GitLab Runner on the IIS server (Windows)</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a># choose a folder, e.g.:
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>mkdir C:\gitlab-runner
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>cd C:\gitlab-runner
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a># download runner (if you haven&#39;t)
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a># (Or copy gitlab-runner.exe here)
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a>
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a># install as a Windows service
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a>.\gitlab-runner.exe install
<a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a>.\gitlab-runner.exe start
</code></pre></div>
<ul>
<li>
<p>Register the runner (project-scoped)</p>
<ul>
<li>
<p>Get the registration token from your project: Project  Settings  CI/CD  Runners  New project runner</p>
</li>
<li>
<p>Then register:</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>  .\gitlab-runner.exe register `
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>  --url https://&lt;your-gitlab-host&gt;/ `
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>  --registration-token &lt;PROJECT_TOKEN&gt; `
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>  --executor shell `
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>  --shell powershell `
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a>  --description &quot;IIS Local Runner&quot; `
<a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a>  --tag-list &quot;windows,iis-local&quot; `
<a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a>  --non-interactive
</code></pre></div>
<blockquote>
<p>The tags you set here (e.g., iis-local) are what youll use in the deploy job.</p>
</blockquote>
<ul>
<li>
<p>Adjust runner config (recommended): Open C:\gitlab-runner\config.toml and ensure:</p>
</li>
<li>
<p>Then restart:</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>cd C:\gitlab-runner
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>.\gitlab-runner.exe stop
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>.\gitlab-runner.exe start
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>.\gitlab-runner.exe verify
</code></pre></div>
<ul>
<li>
<p>Service account permissions: The Windows service gitlab-runner runs under Local System by default. Thats usually enough to write to C:\inetpub\wwwroot\Hello-World and control IIS. If you run it under a custom account, give that account:</p>
</li>
<li>
<p>Modify on C:\inetpub\wwwroot\Hello-World</p>
</li>
<li>
<p>Membership in IIS_IUSRS (to start/stop app pool), or grant that right via policy.</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>GitLab CI/CD variables (project  Settings  CI/CD  Variables)</p>
<ul>
<li>
<p>Create these (no secrets here, so Masked = OFF; set Protected = ON if branch is protected):</p>
<ul>
<li>
<p>IIS_SITE_PATH = C:\inetpub\wwwroot\Hello-World</p>
</li>
<li>
<p>IIS_APPPOOL = HelloWorldPool (optional; blank if you dont recycle)
    (You do not need PROD_SERVER, PROD_USER, PROD_PASSWORD anymore.)</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Add the local deploy script to your repo</p>
<ul>
<li>Create scripts/Deploy-IIS-Local.ps1:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>param(
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>  [Parameter(Mandatory=$true)][string]$PackageDir,   # local publish folder (artifact)
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>  [Parameter(Mandatory=$true)][string]$SitePath,     # e.g. C:\inetpub\wwwroot\Hello-World
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>  [Parameter(Mandatory=$false)][string]$AppPool      # optional: HelloWorldPool
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>)
<a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a>
<a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a>$ErrorActionPreference = &#39;Stop&#39;
<a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a>Write-Host &quot;== Local IIS deploy ==&quot;
<a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a>Write-Host &quot;PackageDir: $PackageDir&quot;
<a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a>Write-Host &quot;SitePath  : $SitePath&quot;
<a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a>if ($AppPool) { Write-Host &quot;AppPool   : $AppPool&quot; }
<a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a>
<a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a>if (!(Test-Path $PackageDir)) { throw &quot;PackageDir not found: $PackageDir&quot; }
<a id="__codelineno-15-14" name="__codelineno-15-14" href="#__codelineno-15-14"></a>$srcCount = (Get-ChildItem -Recurse -Force $PackageDir | Where-Object { -not $_.PSIsContainer }).Count
<a id="__codelineno-15-15" name="__codelineno-15-15" href="#__codelineno-15-15"></a>if ($srcCount -eq 0) { throw &quot;PackageDir is empty.&quot; }
<a id="__codelineno-15-16" name="__codelineno-15-16" href="#__codelineno-15-16"></a>
<a id="__codelineno-15-17" name="__codelineno-15-17" href="#__codelineno-15-17"></a># Take site offline to avoid file locks
<a id="__codelineno-15-18" name="__codelineno-15-18" href="#__codelineno-15-18"></a>$offline = Join-Path $SitePath &#39;app_offline.htm&#39;
<a id="__codelineno-15-19" name="__codelineno-15-19" href="#__codelineno-15-19"></a>&#39;&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;body&gt;&lt;h3&gt;Updating&lt;/h3&gt;&lt;/body&gt;&lt;/html&gt;&#39; | Out-File -Encoding utf8 $offline
<a id="__codelineno-15-20" name="__codelineno-15-20" href="#__codelineno-15-20"></a>
<a id="__codelineno-15-21" name="__codelineno-15-21" href="#__codelineno-15-21"></a># Stop app pool if provided
<a id="__codelineno-15-22" name="__codelineno-15-22" href="#__codelineno-15-22"></a>if ($AppPool) {
<a id="__codelineno-15-23" name="__codelineno-15-23" href="#__codelineno-15-23"></a>  Import-Module WebAdministration
<a id="__codelineno-15-24" name="__codelineno-15-24" href="#__codelineno-15-24"></a>  if (Test-Path &quot;IIS:\AppPools\$AppPool&quot;) {
<a id="__codelineno-15-25" name="__codelineno-15-25" href="#__codelineno-15-25"></a>    Write-Host &quot;Stopping AppPool: $AppPool&quot;
<a id="__codelineno-15-26" name="__codelineno-15-26" href="#__codelineno-15-26"></a>    Stop-WebAppPool -Name $AppPool
<a id="__codelineno-15-27" name="__codelineno-15-27" href="#__codelineno-15-27"></a>  } else {
<a id="__codelineno-15-28" name="__codelineno-15-28" href="#__codelineno-15-28"></a>    Write-Warning &quot;AppPool $AppPool not found.&quot;
<a id="__codelineno-15-29" name="__codelineno-15-29" href="#__codelineno-15-29"></a>  }
<a id="__codelineno-15-30" name="__codelineno-15-30" href="#__codelineno-15-30"></a>}
<a id="__codelineno-15-31" name="__codelineno-15-31" href="#__codelineno-15-31"></a>
<a id="__codelineno-15-32" name="__codelineno-15-32" href="#__codelineno-15-32"></a># Ensure target exists
<a id="__codelineno-15-33" name="__codelineno-15-33" href="#__codelineno-15-33"></a>if (!(Test-Path $SitePath)) { New-Item -ItemType Directory -Force -Path $SitePath | Out-Null }
<a id="__codelineno-15-34" name="__codelineno-15-34" href="#__codelineno-15-34"></a>
<a id="__codelineno-15-35" name="__codelineno-15-35" href="#__codelineno-15-35"></a># Mirror files (fast &amp; resilient)
<a id="__codelineno-15-36" name="__codelineno-15-36" href="#__codelineno-15-36"></a>$before = (Get-ChildItem -Recurse -Force $SitePath | Where-Object { -not $_.PSIsContainer }).Count
<a id="__codelineno-15-37" name="__codelineno-15-37" href="#__codelineno-15-37"></a>$rc = robocopy $PackageDir $SitePath /MIR /NFL /NDL /NP /R:2 /W:2
<a id="__codelineno-15-38" name="__codelineno-15-38" href="#__codelineno-15-38"></a>if ($LASTEXITCODE -ge 8) { throw &quot;Robocopy failed with code $LASTEXITCODE&quot; }
<a id="__codelineno-15-39" name="__codelineno-15-39" href="#__codelineno-15-39"></a>$after = (Get-ChildItem -Recurse -Force $SitePath | Where-Object { -not $_.PSIsContainer }).Count
<a id="__codelineno-15-40" name="__codelineno-15-40" href="#__codelineno-15-40"></a>
<a id="__codelineno-15-41" name="__codelineno-15-41" href="#__codelineno-15-41"></a>Remove-Item $offline -ErrorAction SilentlyContinue
<a id="__codelineno-15-42" name="__codelineno-15-42" href="#__codelineno-15-42"></a>
<a id="__codelineno-15-43" name="__codelineno-15-43" href="#__codelineno-15-43"></a>if ($AppPool) {
<a id="__codelineno-15-44" name="__codelineno-15-44" href="#__codelineno-15-44"></a>  Write-Host &quot;Starting AppPool: $AppPool&quot;
<a id="__codelineno-15-45" name="__codelineno-15-45" href="#__codelineno-15-45"></a>  Start-WebAppPool -Name $AppPool
<a id="__codelineno-15-46" name="__codelineno-15-46" href="#__codelineno-15-46"></a>}
<a id="__codelineno-15-47" name="__codelineno-15-47" href="#__codelineno-15-47"></a>
<a id="__codelineno-15-48" name="__codelineno-15-48" href="#__codelineno-15-48"></a>Write-Host &quot;Files before: $before; after: $after&quot;
<a id="__codelineno-15-49" name="__codelineno-15-49" href="#__codelineno-15-49"></a>Write-Host &quot;Deploy complete.&quot;
</code></pre></div>
</li>
<li>
<p>Update .gitlab-ci.yml</p>
<ul>
<li>Keep your working build/test/package jobs. Add a local deploy job that uses the IIS servers runner tag (e.g., iis-local) and no WinRM.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>stages: [build, test, package, deploy]
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>image: mcr.microsoft.com/dotnet/sdk:9.0
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a>variables:
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a>  DOTNET_CLI_TELEMETRY_OPTOUT: &quot;1&quot;
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a>  DOTNET_SKIP_FIRST_TIME_EXPERIENCE: &quot;1&quot;
<a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a>  CONFIGURATION: &quot;Release&quot;
<a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a>
<a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a>cache:
<a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a>  key: &quot;nuget&quot;
<a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a>  paths:
<a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a>    - .nuget/packages
<a id="__codelineno-16-14" name="__codelineno-16-14" href="#__codelineno-16-14"></a>
<a id="__codelineno-16-15" name="__codelineno-16-15" href="#__codelineno-16-15"></a>build:
<a id="__codelineno-16-16" name="__codelineno-16-16" href="#__codelineno-16-16"></a>  stage: build
<a id="__codelineno-16-17" name="__codelineno-16-17" href="#__codelineno-16-17"></a>  script:
<a id="__codelineno-16-18" name="__codelineno-16-18" href="#__codelineno-16-18"></a>    - dotnet --info
<a id="__codelineno-16-19" name="__codelineno-16-19" href="#__codelineno-16-19"></a>    - dotnet restore
<a id="__codelineno-16-20" name="__codelineno-16-20" href="#__codelineno-16-20"></a>    - dotnet build -c $CONFIGURATION
<a id="__codelineno-16-21" name="__codelineno-16-21" href="#__codelineno-16-21"></a>  rules:
<a id="__codelineno-16-22" name="__codelineno-16-22" href="#__codelineno-16-22"></a>    - if: &#39;$CI_COMMIT_BRANCH == &quot;main&quot;&#39;
<a id="__codelineno-16-23" name="__codelineno-16-23" href="#__codelineno-16-23"></a>    - if: &#39;$CI_COMMIT_BRANCH == &quot;production&quot;&#39;
<a id="__codelineno-16-24" name="__codelineno-16-24" href="#__codelineno-16-24"></a>
<a id="__codelineno-16-25" name="__codelineno-16-25" href="#__codelineno-16-25"></a>test:
<a id="__codelineno-16-26" name="__codelineno-16-26" href="#__codelineno-16-26"></a>  stage: test
<a id="__codelineno-16-27" name="__codelineno-16-27" href="#__codelineno-16-27"></a>  script:
<a id="__codelineno-16-28" name="__codelineno-16-28" href="#__codelineno-16-28"></a>    - if [ -d &quot;tests&quot; ]; then dotnet test --no-build -c $CONFIGURATION; else echo &quot;No tests found, skipping.&quot;; fi
<a id="__codelineno-16-29" name="__codelineno-16-29" href="#__codelineno-16-29"></a>  needs: [build]
<a id="__codelineno-16-30" name="__codelineno-16-30" href="#__codelineno-16-30"></a>  rules:
<a id="__codelineno-16-31" name="__codelineno-16-31" href="#__codelineno-16-31"></a>    - if: &#39;$CI_COMMIT_BRANCH == &quot;main&quot;&#39;
<a id="__codelineno-16-32" name="__codelineno-16-32" href="#__codelineno-16-32"></a>
<a id="__codelineno-16-33" name="__codelineno-16-33" href="#__codelineno-16-33"></a>package:
<a id="__codelineno-16-34" name="__codelineno-16-34" href="#__codelineno-16-34"></a>  stage: package
<a id="__codelineno-16-35" name="__codelineno-16-35" href="#__codelineno-16-35"></a>  script:
<a id="__codelineno-16-36" name="__codelineno-16-36" href="#__codelineno-16-36"></a>    - dotnet publish Hello-World.csproj -c $CONFIGURATION -o publish  # replace the name of project
<a id="__codelineno-16-37" name="__codelineno-16-37" href="#__codelineno-16-37"></a>  needs: [build]
<a id="__codelineno-16-38" name="__codelineno-16-38" href="#__codelineno-16-38"></a>  artifacts:
<a id="__codelineno-16-39" name="__codelineno-16-39" href="#__codelineno-16-39"></a>    paths:
<a id="__codelineno-16-40" name="__codelineno-16-40" href="#__codelineno-16-40"></a>      - publish/**
<a id="__codelineno-16-41" name="__codelineno-16-41" href="#__codelineno-16-41"></a>      - scripts/**                   # include the deploy script for simplicity
<a id="__codelineno-16-42" name="__codelineno-16-42" href="#__codelineno-16-42"></a>    expire_in: 7 days
<a id="__codelineno-16-43" name="__codelineno-16-43" href="#__codelineno-16-43"></a>  rules:
<a id="__codelineno-16-44" name="__codelineno-16-44" href="#__codelineno-16-44"></a>    - if: &#39;$CI_COMMIT_BRANCH == &quot;production&quot;&#39;
<a id="__codelineno-16-45" name="__codelineno-16-45" href="#__codelineno-16-45"></a>
<a id="__codelineno-16-46" name="__codelineno-16-46" href="#__codelineno-16-46"></a>deploy_prod_local:
<a id="__codelineno-16-47" name="__codelineno-16-47" href="#__codelineno-16-47"></a>  stage: deploy
<a id="__codelineno-16-48" name="__codelineno-16-48" href="#__codelineno-16-48"></a>  tags: [&quot;iis-local&quot;]               # &lt;-- tag of the Runner installed on IIS
<a id="__codelineno-16-49" name="__codelineno-16-49" href="#__codelineno-16-49"></a>  variables:
<a id="__codelineno-16-50" name="__codelineno-16-50" href="#__codelineno-16-50"></a>    GIT_STRATEGY: none              # only need artifacts, not source checkout
<a id="__codelineno-16-51" name="__codelineno-16-51" href="#__codelineno-16-51"></a>  needs: [package]
<a id="__codelineno-16-52" name="__codelineno-16-52" href="#__codelineno-16-52"></a>  script:
<a id="__codelineno-16-53" name="__codelineno-16-53" href="#__codelineno-16-53"></a>  - powershell -NoProfile -ExecutionPolicy Bypass -File &quot;scripts\Deploy-IIS-Local.ps1&quot; `
<a id="__codelineno-16-54" name="__codelineno-16-54" href="#__codelineno-16-54"></a>    -PackageDir &quot;$env:CI_PROJECT_DIR\publish&quot; `
<a id="__codelineno-16-55" name="__codelineno-16-55" href="#__codelineno-16-55"></a>    -SitePath &quot;$env:IIS_SITE_PATH&quot; `
<a id="__codelineno-16-56" name="__codelineno-16-56" href="#__codelineno-16-56"></a>    -AppPool &quot;$env:IIS_APPPOOL&quot;
<a id="__codelineno-16-57" name="__codelineno-16-57" href="#__codelineno-16-57"></a>  environment:
<a id="__codelineno-16-58" name="__codelineno-16-58" href="#__codelineno-16-58"></a>    name: production
<a id="__codelineno-16-59" name="__codelineno-16-59" href="#__codelineno-16-59"></a>    url: http://&lt;your-site-binding&gt;/
<a id="__codelineno-16-60" name="__codelineno-16-60" href="#__codelineno-16-60"></a>  when: manual                      # manual confirmation
<a id="__codelineno-16-61" name="__codelineno-16-61" href="#__codelineno-16-61"></a>  rules:
<a id="__codelineno-16-62" name="__codelineno-16-62" href="#__codelineno-16-62"></a>    - if: &#39;$CI_COMMIT_BRANCH == &quot;production&quot;&#39;
</code></pre></div>
<blockquote>
<p>If your runner tag is just windows, change tags: ["iis-local"] to tags: ["windows"].</p>
</blockquote>
</li>
<li>
<p>Protect the production path (recommended)</p>
<ul>
<li>
<p>Protect branch: Settings  Repository  Protected branches  protect production.</p>
</li>
<li>
<p>Runner Protected: set the runner to Protected = ON (so it only runs on protected branches).</p>
</li>
<li>
<p>Variables Protected: set IIS_SITE_PATH and IIS_APPPOOL to Protected = ON.</p>
</li>
</ul>
</li>
<li>
<p>Deploy flow</p>
<ul>
<li>
<p>Push to <code>production</code> branch.</p>
</li>
<li>
<p>Pipeline runs <code>build</code>  <code>package</code>.</p>
</li>
<li>
<p>Click <strong>Play</strong> on <code>deploy_prod_local</code>.</p>
</li>
<li>
<p>The job runs on the IIS server itself, copies <code>publish/**</code> into <code>C:\inetpub\wwwroot\Hello-World</code>, writes <code>app_offline.htm</code>, mirrors files, removes it, (optionally) recycles the app pool.</p>
</li>
<li>
<p>Browse the site.</p>
</li>
</ul>
</li>
<li>
<p>Quick verification &amp; common fixes</p>
<ul>
<li>
<p><strong>Job cant start</strong>  runner tag mismatch or protection mismatch. Fix tags, Protected toggles.</p>
</li>
<li>
<p><strong>Access denied</strong>  run the runner service as Local System (default) or grant your custom account Modify on the site folder and ability to manage IIS.</p>
</li>
<li>
<p><strong>Site locked during copy</strong>  <code>app_offline.htm</code> already included; ensure no antivirus is holding locks.</p>
</li>
<li>
<p><strong>Wrong csproj path</strong>  adjust <code>dotnet publish</code> path in <code>package</code> job.</p>
</li>
<li>
<p><strong>Artifacts missing</strong>  check that <code>package</code> uploaded <code>publish/**</code> and <code>deploy</code> has <code>needs: [package]</code>.</p>
</li>
<li>
<p><strong>Get the real error (enable stdout logs)</strong>   In the deployed site folder (same level as your .dll), open <code>web.config</code> and temporarily <code>enable ANCM stdout logs</code>: 
     <div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="o">&lt;</span><span class="n">aspNetCore</span><span class="w"> </span><span class="n">processPath</span><span class="o">=</span><span class="s">&quot;dotnet&quot;</span><span class="w"> </span><span class="n">arguments</span><span class="o">=</span><span class="s">&quot;.\YourApp.dll&quot;</span><span class="w"> </span><span class="n">stdoutLogEnabled</span><span class="o">=</span><span class="s">&quot;true&quot;</span><span class="w"> </span><span class="n">stdoutLogFile</span><span class="o">=</span><span class="s">&quot;.\logs\stdout&quot;</span><span class="w"> </span><span class="n">hostingModel</span><span class="o">=</span><span class="s">&quot;inprocess&quot;</span><span class="w"> </span><span class="o">/&gt;</span>
</code></pre></div></p>
</li>
</ul>
<hr />
</li>
</ol>
<h2 id="add-notifications">Add notifications<a class="headerlink" href="#add-notifications" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p>Slack (recommended)</p>
<ul>
<li>
<p>In Slack:</p>
<ul>
<li>
<p>Go to your workspace  Apps  Manage apps  Incoming Webhooks</p>
</li>
<li>
<p>Create a new webhook  choose your channel  copy the webhook URL.</p>
</li>
</ul>
</li>
<li>
<p>In GitLab:</p>
<ul>
<li>
<p>Project  Settings  Integrations  Slack notifications</p>
</li>
<li>
<p>Paste the webhook URL.</p>
</li>
<li>
<p>Choose events (Pipeline, Job, Merge Request, etc.).</p>
</li>
<li>
<p>Save.</p>
</li>
</ul>
</li>
<li>
<p>Now Slack will automatically post updates like:</p>
<ul>
<li> Pipeline succeeded  production deploy complete</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Microsoft Teams</p>
<ul>
<li>
<p>In your Teams channel:</p>
<ul>
<li>Go to Connectors  Incoming Webhook  Add  give it a name and copy the webhook URL.</li>
</ul>
</li>
<li>
<p>In GitLab:</p>
<ul>
<li>Go to Settings  Integrations  Microsoft Teams notifications  paste the webhook URL  select pipeline/job events.</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Email Notifications (simple)</p>
<ul>
<li>
<p>GitLab already emails users automatically on:</p>
<ul>
<li>
<p>failed pipelines (if youre subscribed),</p>
</li>
<li>
<p>failed jobs you own.</p>
</li>
</ul>
</li>
<li>
<p>To fine-tune:</p>
<ul>
<li>GitLab  User Menu  Preferences  Notifications  choose Participating or Watch level for your project.</li>
</ul>
</li>
<li>
<p>Or use project-level notifications:</p>
<ul>
<li>Go to Project  Settings  Notifications  Add custom notification email </li>
</ul>
</li>
</ul>
</li>
</ol>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright  2026 Mahboubeh Kouhpayeh
    </div>
  
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/in/mahboubeh-kouhpayeh/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.sections", "navigation.top", "content.code.copy", "content.action.edit", "toc.integrate"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
      
    
  </body>
</html>